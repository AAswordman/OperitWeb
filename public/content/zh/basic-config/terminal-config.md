# 终端配置

本节介绍如何在 Operit AI 中快速完成终端环境的基础配置。

## 步骤 1：从对话界面进入终端

在 AI 对话界面，点击右上角工具区域中**左侧的终端按钮**，即可切换到终端界面：

![](/manuals/assets/terminal/config/1.png)

在终端界面的右下角，点击 **「环境配置」** 按钮，可以进入终端环境的快捷配置向导。

## 步骤 2：在环境配置中勾选选项

在弹出的环境配置窗口中：

- 只需勾选**前两个**配置项；
- 然后点击 **「开始配置」** 按钮，等待系统自动执行配置脚本：

![](/manuals/assets/terminal/config/2.png)

## 步骤 3：等待配置完成

当终端输出内容出现如下界面时，表示环境配置已经成功完成，可以开始正常使用终端功能：

![](/manuals/assets/terminal/config/3.png)

## 高级配置（可选）

如果你已经完成基础配置，还可以在终端右下角的 **「设置」** 里调整高级选项，让终端更贴合你的使用场景。

### 1）chroot 模式

**适合人群**：已经 Root 设备、并且希望使用 chroot 方式运行 Ubuntu 的用户。

你可以在设置中找到 **「chroot 模式」** 开关：

- 关闭时，终端会使用默认方式启动（兼容性更稳）；
- 开启后，会以 chroot 方式启动，并挂载常见系统目录；
- 该模式需要设备已 Root，且你已经为应用授予 Root 权限；
- 如果开启后出现无法进入终端、报错变多等情况，建议先关闭该项再重试。

### 2）SSH 连接（替代模式）

**适合场景**：你希望把远程服务器当作主要工作环境，或本地设备性能不够时。

操作建议：

1. 先到 **「环境配置」** 页面安装 SSH 工具（`ssh`、`sshpass`）；
2. 在设置里的 SSH 配置中填写主机、端口、用户名和认证方式（密码或密钥）；
3. 打开 **「启用 SSH 连接」**。

启用后，SSH 会作为 AI 使用终端时的**主工作环境**：

- AI 执行命令会在这个 SSH 环境中进行；
- MCP 的运行会在这个 SSH 环境中进行；
- AI 在 Linux 侧的文件读写也会落在这个 SSH 环境中。

也就是说，启用后会以远程环境替代本地终端能力。你可以把目标配置为手机里的 Termux，也可以配置为一台独立的 Linux 服务器。

如果你只是想让 AI 在某个任务里临时使用远程 Linux，通常更推荐直接在对话里要求 AI 执行 SSH。这样更轻量，也不会长期切换终端主环境。

### 3）反向挂载（配合 SSH 使用）

**适合场景**：你在远程服务器开发，但又想直接访问手机本地文件。

在 SSH 配置中启用 **「反向挂载」** 后，远程侧可以通过以下目录访问本地文件：

- `~/storage`
- `~/sdcard`

启用前请确认：

- 本地环境已安装 `openssh-server`（可在环境配置中安装）；
- 远程服务器已安装 `sshfs`；
- 反向挂载相关端口与本地 SSH 账号信息填写正确。

如果你开启后仍无法挂载，优先检查这三项，再重连一次 SSH。

### 4）镜像源（软件源管理）

当你遇到下载慢、超时、安装失败等问题时，可以在 **「软件源管理」** 中切换镜像源。

你可以分别为不同工具选择源：

- APT
- PIP（同时影响 uv）
- NPM
- Rust

另外也支持添加自定义源。切换后，后续安装会按你当前选择的源执行；如果只是偶发网络问题，通常换源后重试即可。

## 配置遇到问题时怎么办？

如果在终端环境配置过程中遇到异常，可以先通过终端的「设置」界面进行排查和修复：

- 在终端界面的右下角，点击 **「设置」** 按钮；
- 将会打开如下终端设置界面，其中包含**换源**、**重置**等功能：

![](/manuals/assets/terminal/config/4.png)

下面列出两个比较典型的问题及对应的解决方法：

### 问题 1：安装包时提示「请求错误」

现象示例：

![](/manuals/assets/terminal/config/5.jpg)

**可能原因**：当前下载源网络状态不佳（例如访问超时、被墙等），导致请求失败。

**解决方法**：

1. 打开终端右下角的 **「设置」** 按钮，进入终端设置界面；
2. 在设置界面中，尝试切换或更新下载源（换一个可访问性更好的源）；
3. 保存设置后，重新执行环境配置或相关安装命令。

### 问题 2：终端未出现 operit 提示符，且报错信息很多

现象示例（终端中多种报错、未正常进入 operit 环境）：

![](/manuals/assets/terminal/config/6.jpg)
![](/manuals/assets/terminal/config/7.jpg)
![](/manuals/assets/terminal/config/8.jpg)

**可能原因**：之前的环境配置过程不完整或被中断，导致终端环境处于异常状态。

**解决方法**：

1. 在终端界面的右下角点击 **「设置」**，进入终端设置界面；
2. 点击设置界面中的 **「重置」** 按钮，将终端环境恢复到初始状态；
3. 关闭并**重启 Operit AI 应用**；
4. 按本页前面的步骤重新进行一次终端环境配置。

### 问题 3：终端有输出，但权限授予界面全部显示未授权

现象示例：

![](/manuals/assets/terminal/config/9.jpg)

**可能原因**：终端环境仍在后台执行自动配置脚本，权限状态尚未完成刷新。

**解决方法**：

- 不要立即进行其他复杂操作，先**耐心等待终端配置过程结束**；
- 终端输出稳定、相关脚本执行完毕后，再重新打开权限授予界面，一般会自动恢复为正确的授权状态。
