import{r as o,I as D,ao as Dt,j as r,f as Vt,h as E,al as R,B as y,d as de,C as z,T as kt,t as Ut,a as qt,u as Ft,b as Wt,e as le,S as Gt}from"./index-BUC7ar-9.js";import{s as Kt,g as Qt,a as Xt,b as Jt,c as Yt,d as Zt,e as ft,T as er,L as Ue,f as tr,h as gt}from"./operitLocalStore-BUG9u9NC.js";import{I as pt,M as rr,r as nr,a as Ot,b as Ct,c as Et,h as sr,v as ar,u as or,d as ir}from"./remarkDetails-DpQ_e44o.js";import{a as cr,R as lr}from"./CheckCircleOutlined-B2OR44nN.js";import{I as Re}from"./index-BG7-Innl.js";import{s as P}from"./index-Bwaw2ub6.js";import{A as ae}from"./index-AJnqX13Z.js";import{T as qe,S as dr}from"./index-BWcCT85H.js";import{S as bt}from"./index-BN_AVXRX.js";import"./EyeOutlined-DeyaywGd.js";import"./addEventListener-CY0sHx15.js";var ur={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M697.8 481.4c33.6-35 54.2-82.3 54.2-134.3v-10.2C752 229.3 663.9 142 555.3 142H259.4c-15.1 0-27.4 12.3-27.4 27.4v679.1c0 16.3 13.2 29.5 29.5 29.5h318.7c117 0 211.8-94.2 211.8-210.5v-11c0-73-37.4-137.3-94.2-175.1zM328 238h224.7c57.1 0 103.3 44.4 103.3 99.3v9.5c0 54.8-46.3 99.3-103.3 99.3H328V238zm366.6 429.4c0 62.9-51.7 113.9-115.5 113.9H328V542.7h251.1c63.8 0 115.5 51 115.5 113.9v10.8z"}}]},name:"bold",theme:"outlined"};function Ge(){return Ge=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Ge.apply(this,arguments)}const hr=(t,e)=>o.createElement(D,Ge({},t,{ref:e,icon:ur})),mr=o.forwardRef(hr);var fr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M433.1 657.7a31.8 31.8 0 0051.7 0l210.6-292c3.8-5.3 0-12.7-6.5-12.7H642c-10.2 0-19.9 4.9-25.9 13.3L459 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H315c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"check-square",theme:"outlined"};function Ke(){return Ke=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Ke.apply(this,arguments)}const gr=(t,e)=>o.createElement(D,Ke({},t,{ref:e,icon:fr})),pr=o.forwardRef(gr);var br={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M516 673c0 4.4 3.4 8 7.5 8h185c4.1 0 7.5-3.6 7.5-8v-48c0-4.4-3.4-8-7.5-8h-185c-4.1 0-7.5 3.6-7.5 8v48zm-194.9 6.1l192-161c3.8-3.2 3.8-9.1 0-12.3l-192-160.9A7.95 7.95 0 00308 351v62.7c0 2.4 1 4.6 2.9 6.1L420.7 512l-109.8 92.2a8.1 8.1 0 00-2.9 6.1V673c0 6.8 7.9 10.5 13.1 6.1zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"code",theme:"outlined"};function Qe(){return Qe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Qe.apply(this,arguments)}const xr=(t,e)=>o.createElement(D,Qe({},t,{ref:e,icon:br})),yr=o.forwardRef(xr);function Xe(){return Xe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Xe.apply(this,arguments)}const jr=(t,e)=>o.createElement(D,Xe({},t,{ref:e,icon:Dt})),vr=o.forwardRef(jr);var wr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 416H616c-4.4 0-8 3.6-8 8v112c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-56h60v320h-46c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h164c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8h-46V480h60v56c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V424c0-4.4-3.6-8-8-8zM656 296V168c0-4.4-3.6-8-8-8H104c-4.4 0-8 3.6-8 8v128c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-64h168v560h-92c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-92V232h168v64c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8z"}}]},name:"font-size",theme:"outlined"};function Je(){return Je=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Je.apply(this,arguments)}const $r=(t,e)=>o.createElement(D,Je({},t,{ref:e,icon:wr})),Fe=o.forwardRef($r);var Sr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M798 160H366c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h181.2l-156 544H229c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h432c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8H474.4l156-544H798c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"italic",theme:"outlined"};function Ye(){return Ye=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Ye.apply(this,arguments)}const kr=(t,e)=>o.createElement(D,Ye({},t,{ref:e,icon:Sr})),Or=o.forwardRef(kr);var Cr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"};function Ze(){return Ze=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Ze.apply(this,arguments)}const Er=(t,e)=>o.createElement(D,Ze({},t,{ref:e,icon:Cr})),Tr=o.forwardRef(Er);var Lr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 760H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-568H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM216 712H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h72.4v20.5h-35.7c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h35.7V838H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4V716c0-2.2-1.8-4-4-4zM100 188h38v120c0 2.2 1.8 4 4 4h40c2.2 0 4-1.8 4-4V152c0-4.4-3.6-8-8-8h-78c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4zm116 240H100c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4h68.4l-70.3 77.7a8.3 8.3 0 00-2.1 5.4V592c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4v-36c0-2.2-1.8-4-4-4h-68.4l70.3-77.7a8.3 8.3 0 002.1-5.4V432c0-2.2-1.8-4-4-4z"}}]},name:"ordered-list",theme:"outlined"};function et(){return et=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},et.apply(this,arguments)}const _r=(t,e)=>o.createElement(D,et({},t,{ref:e,icon:Lr})),Ir=o.forwardRef(_r);var Rr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2zM304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z"}}]},name:"picture",theme:"outlined"};function tt(){return tt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},tt.apply(this,arguments)}const Mr=(t,e)=>o.createElement(D,tt({},t,{ref:e,icon:Rr})),Ar=o.forwardRef(Mr);var zr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M952 474H569.9c-10-2-20.5-4-31.6-6-15.9-2.9-22.2-4.1-30.8-5.8-51.3-10-82.2-20-106.8-34.2-35.1-20.5-52.2-48.3-52.2-85.1 0-37 15.2-67.7 44-89 28.4-21 68.8-32.1 116.8-32.1 54.8 0 97.1 14.4 125.8 42.8 14.6 14.4 25.3 32.1 31.8 52.6 1.3 4.1 2.8 10 4.3 17.8.9 4.8 5.2 8.2 9.9 8.2h72.8c5.6 0 10.1-4.6 10.1-10.1v-1c-.7-6.8-1.3-12.1-2-16-7.3-43.5-28-81.7-59.7-110.3-44.4-40.5-109.7-61.8-188.7-61.8-72.3 0-137.4 18.1-183.3 50.9-25.6 18.4-45.4 41.2-58.6 67.7-13.5 27.1-20.3 58.4-20.3 92.9 0 29.5 5.7 54.5 17.3 76.5 8.3 15.7 19.6 29.5 34.1 42H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h433.2c2.1.4 3.9.8 5.9 1.2 30.9 6.2 49.5 10.4 66.6 15.2 23 6.5 40.6 13.3 55.2 21.5 35.8 20.2 53.3 49.2 53.3 89 0 35.3-15.5 66.8-43.6 88.8-30.5 23.9-75.6 36.4-130.5 36.4-43.7 0-80.7-8.5-110.2-25-29.1-16.3-49.1-39.8-59.7-69.5-.8-2.2-1.7-5.2-2.7-9-1.2-4.4-5.3-7.5-9.7-7.5h-79.7c-5.6 0-10.1 4.6-10.1 10.1v1c.2 2.3.4 4.2.6 5.7 6.5 48.8 30.3 88.8 70.7 118.8 47.1 34.8 113.4 53.2 191.8 53.2 84.2 0 154.8-19.8 204.2-57.3 25-18.9 44.2-42.2 57.1-69 13-27.1 19.7-57.9 19.7-91.5 0-31.8-5.8-58.4-17.8-81.4-5.8-11.2-13.1-21.5-21.8-30.8H952c4.4 0 8-3.6 8-8v-60a8 8 0 00-8-7.9z"}}]},name:"strikethrough",theme:"outlined"};function rt(){return rt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},rt.apply(this,arguments)}const Hr=(t,e)=>o.createElement(D,rt({},t,{ref:e,icon:zr})),Br=o.forwardRef(Hr);var Nr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"unordered-list",theme:"outlined"};function nt(){return nt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},nt.apply(this,arguments)}const Pr=(t,e)=>o.createElement(D,nt({},t,{ref:e,icon:Nr})),Dr=o.forwardRef(Pr),Vr=ar,Ur=t=>t.startsWith("/")&&!t.startsWith("//")?`${"./".endsWith("/")?"./".slice(0,-1):"./"}${t}`:t,qr=({content:t,resolveImageUrl:e})=>r.jsx("div",{className:"markdown-body",children:r.jsx(pt.PreviewGroup,{children:r.jsx(rr,{remarkPlugins:[Ot,Ct,Et],rehypePlugins:[nr],urlTransform:Ur,components:{code({inline:s,className:n,children:c,style:a,...l}){const d=/language-(\w+)/.exec(n||"");return!s&&d?r.jsx(sr,{style:Vr,language:d[1],PreTag:"div",...l,children:String(c).replace(/\n$/,"")}):r.jsx("code",{className:n,...l,children:c})},img:({node:s,onClick:n,...c})=>{const a=typeof c.src=="string"?c.src:"",l=a&&e?e(a):a;return r.jsx(pt,{...c,src:l||c.src})}},children:t})})}),Fr=t=>t.replace(/\r\n?/g,`
`),xe=t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),ye=t=>xe(t).replace(/`/g,"&#96;"),ot=(t,e)=>{if(!t)return"";const c=new DOMParser().parseFromString(`<div>${t}</div>`,"text/html").body.firstElementChild;return c?(c.querySelectorAll("img").forEach(l=>{const d=l.getAttribute("src")||"";if(!d)return;l.setAttribute("data-operit-src",d);const w=e?.resolveImageUrl?.(d)||d;l.setAttribute("src",w)}),c.innerHTML):""},Wr=t=>`h${Number.isFinite(t)?Math.min(6,Math.max(1,t)):1}`,ue=(t,e)=>{switch(t.type){case"text":return xe(t.value||"");case"inlineCode":return`<code>${xe(t.value||"")}</code>`;case"emphasis":return`<em>${(t.children||[]).map(s=>ue(s,e)).join("")}</em>`;case"strong":return`<strong>${(t.children||[]).map(s=>ue(s,e)).join("")}</strong>`;case"delete":return`<del>${(t.children||[]).map(s=>ue(s,e)).join("")}</del>`;case"link":{const s=t.url||"",n=(t.children||[]).map(c=>ue(c,e)).join("")||xe(s);return`<a href="${ye(s)}">${n}</a>`}case"image":return Xr(t.alt||"",t.url||"",e);case"break":return"<br />";case"html":return ot(t.value||"",e);default:return""}},je=(t,e)=>t.map(s=>ue(s,e)).join(""),Gr=(t,e)=>{const s=t.children||[];if(!s.length)return"";const n=[];for(const c of s){if(c.type==="paragraph"){n.push(je(c.children||[],e));continue}if(c.type==="list"){n.push(Me(c,e));continue}if(c.type==="html"){n.push(ot(c.value||"",e));continue}n.push(Me(c,e))}return n.join("")},Kr=(t,e)=>(t.children||[]).map(n=>`<td>${je(n.children||[],e)}</td>`).join(""),Me=(t,e)=>{switch(t.type){case"paragraph":{const s=t.children||[],n=s.filter(l=>l.type==="image"),c=s.filter(l=>l.type!=="text"?!0:(l.value||"").trim().length>0);if(n.length>1&&n.length===c.length)return`<div class="image-gallery">${n.map(d=>`<div class="image-container">${ue(d,e)}</div>`).join("")}</div>`;const a=je(s,e);return a.trim()?n.length===1&&n.length===c.length?`<p class="paragraph-with-image">${a}</p>`:`<p>${a}</p>`:""}case"heading":{const s=Wr(t.depth||1),n=je(t.children||[],e);return`<${s}>${n}</${s}>`}case"blockquote":return`<blockquote>${(t.children||[]).map(n=>Me(n,e)).join("")||"<p><br /></p>"}</blockquote>`;case"code":return`<pre><code${t.lang?` class="language-${ye(t.lang)}"`:""}>${xe(t.value||"")}</code></pre>`;case"list":{const s=t.ordered?"ol":"ul",n=(t.children||[]).map(c=>`<li>${Gr(c,e)}</li>`).join("");return`<${s}>${n}</${s}>`}case"thematicBreak":return"<hr />";case"table":{const s=t.children||[];if(!s.length)return"";const c=(s[0].children||[]).map(d=>`<th>${je(d.children||[],e)}</th>`).join(""),a=s.slice(1).map(d=>`<tr>${Kr(d,e)}</tr>`).join(""),l=a?`<tbody>${a}</tbody>`:"";return`<table><thead><tr>${c}</tr></thead>${l}</table>`}case"html":return ot(t.value||"",e);default:return""}},Qr=(t,e)=>{const s=Fr(t||"");if(!s.trim())return"";const n=or().use(ir).use(Ot).use(Ct).use(Et),c=n.parse(s);return(n.runSync(c).children||[]).map(l=>Me(l,e)).join("")},Xr=(t,e,s)=>{const n=s?.resolveImageUrl?.(e)||e;return`<img alt="${ye(t)}" src="${ye(n)}" data-operit-src="${ye(e)}" />`},xt=(t,e)=>Qr(t,e),ve=t=>t.replace(/\u00A0/g," "),W=t=>t.map(e=>{if(e.nodeType===Node.TEXT_NODE)return ve(e.textContent||"").replace(/\s+/g," ");if(e.nodeType!==Node.ELEMENT_NODE)return"";const s=e,n=s.tagName.toLowerCase();if(n==="br")return`
`;if(n==="strong"||n==="b")return`**${W(Array.from(s.childNodes))}**`;if(n==="em"||n==="i")return`*${W(Array.from(s.childNodes))}*`;if(n==="del"||n==="s"||n==="strike")return`~~${W(Array.from(s.childNodes))}~~`;if(n==="code")return s.parentElement?.tagName.toLowerCase()==="pre"?ve(s.textContent||""):`\`${ve(s.textContent||"")}\``;if(n==="a"){const c=s.getAttribute("href")||"";return`[${W(Array.from(s.childNodes)).trim()||c}](${c})`}if(n==="img"){const c=s.getAttribute("data-operit-src")||s.getAttribute("src")||"";return`![${s.getAttribute("alt")||""}](${c})`}if(n==="input"){const c=s;if(c.type==="checkbox")return c.checked?"[x]":"[ ]"}return W(Array.from(s.childNodes))}).join(""),st=(t,e,s=0)=>{const n=[],c=Array.from(t.children).filter(l=>l.tagName.toLowerCase()==="li");let a=1;return c.forEach(l=>{const d=Array.from(l.children).filter(L=>{const m=L.tagName.toLowerCase();return m==="ul"||m==="ol"}),w=l.cloneNode(!0);Array.from(w.children).forEach(L=>{const m=L.tagName.toLowerCase();(m==="ul"||m==="ol")&&L.remove()});const G=w.querySelector('input[type="checkbox"]'),te=G?`${G.checked?"[x]":"[ ]"} `:"";G&&G.remove();const H=e?`${a}.`:"-",K="  ".repeat(s),$=W(Array.from(w.childNodes)).trim();n.push(`${K}${H} ${te}${$}`.trimEnd()),d.forEach(L=>{const m=L.tagName.toLowerCase()==="ol",Q=st(L,m,s+1);Q&&n.push(Q)}),a+=1}),n.join(`
`)},Jr=t=>{const e=Array.from(t.querySelectorAll("tr")).map(l=>Array.from(l.querySelectorAll("th, td")).map(w=>W(Array.from(w.childNodes)).trim().replace(/\|/g,"\\|"))).filter(l=>l.length>0);if(!e.length)return"";const s=e[0],n=e.slice(1),c=s.map(()=>"---");return[`| ${s.join(" | ")} |`,`| ${c.join(" | ")} |`,...n.map(l=>`| ${l.join(" | ")} |`)].join(`
`)},at=t=>t.map(e=>{if(e.nodeType===Node.TEXT_NODE){const a=ve(e.textContent||"").trim();return a?`${a}

`:""}if(e.nodeType!==Node.ELEMENT_NODE)return"";const s=e,n=s.tagName.toLowerCase();if(n==="p"){const a=W(Array.from(s.childNodes)).trim();return a?`${a}

`:""}if(/^h[1-6]$/.test(n)){const a=Number(n[1]),l=W(Array.from(s.childNodes)).trim();return l?`${"#".repeat(a)} ${l}

`:""}if(n==="blockquote"){const a=at(Array.from(s.childNodes)).trim();return a?`${a.split(`
`).map(d=>d?`> ${d}`:">").join(`
`)}

`:""}if(n==="pre"){const a=s.querySelector("code"),l=ve(a?.textContent||s.textContent||"").replace(/\n$/,""),d=a?.getAttribute("class")||"";return`\`\`\`${/language-([\w-]+)/.exec(d)?.[1]||""}
${l}
\`\`\`

`}if(n==="ul"){const a=st(s,!1);return a?`${a}

`:""}if(n==="ol"){const a=st(s,!0);return a?`${a}

`:""}if(n==="table"){const a=Jr(s);return a?`${a}

`:""}if(n==="hr")return`---

`;if(n==="img"){const a=s.getAttribute("data-operit-src")||s.getAttribute("src")||"";return`![${s.getAttribute("alt")||""}](${a})

`}if(n==="details"){const a=s.querySelector(":scope > summary")?.textContent?.trim()||"",l=s.querySelector(":scope > .markdown-details-content"),d=l?at(Array.from(l.childNodes)).trim():"",w=d?`
${d}
`:`
`;return`[details="${a}"]${w}[/details]

`}if(n==="br")return`
`;const c=W(Array.from(s.childNodes)).trim();return c?`${c}

`:""}).join(""),yt=t=>{const n=new DOMParser().parseFromString(`<div>${t}</div>`,"text/html").body.firstElementChild;return n?at(Array.from(n.childNodes)).replace(/\n{3,}/g,`

`).trim():""},{Text:Yr}=kt,jt=t=>t.replace(/\r\n?/g,`
`).replace(/\u00A0/g," ").trim(),vt=t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),We="operit-local://pending",Zr=Vt.forwardRef(({value:t,onChange:e,placeholder:s,mode:n,view:c,fontSize:a,labels:l,onInsertImage:d,resolveImageUrl:w},G)=>{const te=o.useRef(null),H=o.useRef(null),K=o.useRef(null),$=o.useRef(!1),L=o.useRef(!1),m=o.useCallback(()=>te.current?.resizableTextArea?.textArea,[]),Q=o.useCallback(()=>n==="visual"?H.current:m(),[n,m]),V=o.useCallback(u=>{const g=u||H.current;if(!g)return;const f=yt(g.innerHTML);!f.trim()&&t.trim()&&!g.isConnected||(L.current=!0,e(f),requestAnimationFrame(()=>{L.current=!1}))},[e,t]),U=o.useCallback(u=>{const g=H.current;if(!g)return;g.focus();const f=window.getSelection();if(!f||f.rangeCount===0){g.insertAdjacentHTML("beforeend",u),V();return}const S=f.getRangeAt(0);if(!g.contains(S.commonAncestorContainer)){g.insertAdjacentHTML("beforeend",u),V();return}S.deleteContents();const p=document.createElement("template");p.innerHTML=u;const b=p.content,T=b.lastChild;if(S.insertNode(b),T){const _=document.createRange();_.setStartAfter(T),_.collapse(!0),f.removeAllRanges(),f.addRange(_)}V()},[V]),C=o.useCallback((u,g)=>{const f=H.current;f&&(f.focus(),document.execCommand(u,!1,g),V())},[V]),J=o.useCallback((u,g,f,S,p)=>{const b=m();if(!b){const T=`${t.slice(0,g)}${u}${t.slice(f)}`;e(T);return}b.focus(),b.setRangeText(u,g,f,"end"),b.setSelectionRange(S,p),b.dispatchEvent(new Event("input",{bubbles:!0}))},[t,e,m]),j=o.useCallback((u,g,f)=>{const S=m(),p=S?.selectionStart??t.length,b=S?.selectionEnd??t.length,T=t.slice(0,p),ne=t.slice(p,b)||f,F=T.length+u.length,Y=F+ne.length,se=`${u}${ne}${g}`;J(se,p,b,F,Y)},[t,J,m]),B=o.useCallback((u,g)=>{const f=m(),S=f?.selectionStart??t.length,p=f?.selectionEnd??t.length,b=t.lastIndexOf(`
`,Math.max(0,S-1))+1,T=t.indexOf(`
`,p),_=T===-1?t.length:T,Y=t.slice(b,_).split(`
`).map((fe,ce)=>{if(g){const Ee=fe.replace(/^\d+\.\s+/,"");return`${ce+1}. ${Ee}`}return`${u}${fe}`}).join(`
`),se=b,ie=b+Y.length;J(Y,b,_,se,ie)},[t,J,m]),M=o.useCallback(()=>{j("```\n","\n```","code")},[j]);o.useEffect(()=>{if(n!=="visual")return;const u=H.current;if(!u||L.current)return;const g=jt(yt(u.innerHTML)),f=jt(t);g!==f&&(u.innerHTML=xt(t,{resolveImageUrl:w}))},[n,c,t,w]),o.useImperativeHandle(G,()=>({insertText:u=>{if(n==="visual"){const b=xt(u,{resolveImageUrl:w})||`<p>${vt(u).replace(/\n/g,"<br />")}</p>`;U(b);return}const g=m(),f=g?.selectionStart??t.length,S=g?.selectionEnd??t.length,p=f+u.length;J(u,f,S,p,p)}}),[n,t,J,U,m,w]);const re={height:"70vh",minHeight:360,maxHeight:"70vh",overflowY:"auto"},oe=o.useCallback(u=>{if(c!=="split"||$.current)return;const g=Q(),f=K.current;if(!g||!f)return;const S=u==="editor"?g:f,p=u==="editor"?f:g,b=S.scrollHeight-S.clientHeight,T=p.scrollHeight-p.clientHeight;if(b<=0||T<=0)return;const _=S.scrollTop/b;$.current=!0,p.scrollTop=_*T,requestAnimationFrame(()=>{$.current=!1})},[c,Q]),me=o.useCallback(()=>{U('<ul><li><input type="checkbox" disabled /> item</li></ul>')},[U]),we=o.useCallback(()=>{if(!!window.getSelection()?.toString().trim()){C("createLink","url");return}U('<a href="url">text</a>')},[U,C]),$e=o.useCallback(()=>{U(`<img src="${We}" data-operit-src="${We}" alt="image" />`)},[U]),Ae=o.useCallback(()=>{const u=window.getSelection()?.toString()||"code";C("insertHTML",`<code>${vt(u)}</code>`)},[C]),Se=o.useCallback(()=>{C("insertHTML","<pre><code>code</code></pre>")},[C]),ke=()=>r.jsx(Re.TextArea,{ref:te,value:t,onChange:u=>e(u.target.value),onScroll:()=>oe("editor"),placeholder:s,style:{fontSize:a,...re}}),q=()=>r.jsx("div",{ref:H,className:"operit-visual-editor markdown-body",contentEditable:!0,suppressContentEditableWarning:!0,role:"textbox","aria-multiline":!0,"data-placeholder":s,onInput:u=>V(u.currentTarget),onScroll:()=>oe("editor"),style:{fontSize:a,...re}}),Oe=()=>n==="visual"?q():ke(),Ce=()=>r.jsx("div",{ref:K,onScroll:()=>oe("preview"),style:{padding:12,border:"1px solid var(--border-color)",borderRadius:8,background:"var(--card-background)",...re},children:t.trim()?r.jsx(qr,{content:t,resolveImageUrl:w}):r.jsx(Yr,{type:"secondary",children:l.previewEmpty})});return r.jsxs(E,{direction:"vertical",size:"middle",style:{width:"100%"},children:[n==="visual"&&r.jsxs(E,{wrap:!0,children:[r.jsx(R,{title:l.toolbarBold,children:r.jsx(y,{onClick:()=>{if(n==="visual"){C("bold");return}j("**","**","bold")},icon:r.jsx(mr,{})})}),r.jsx(R,{title:l.toolbarItalic,children:r.jsx(y,{onClick:()=>{if(n==="visual"){C("italic");return}j("*","*","italic")},icon:r.jsx(Or,{})})}),r.jsx(R,{title:l.toolbarStrike,children:r.jsx(y,{onClick:()=>{if(n==="visual"){C("strikeThrough");return}j("~~","~~","strike")},icon:r.jsx(Br,{})})}),r.jsx(R,{title:l.toolbarH1,children:r.jsx(y,{onClick:()=>{if(n==="visual"){C("formatBlock","h1");return}B("# ")},icon:r.jsx(Fe,{})})}),r.jsx(R,{title:l.toolbarH2,children:r.jsx(y,{onClick:()=>{if(n==="visual"){C("formatBlock","h2");return}B("## ")},icon:r.jsx(Fe,{})})}),r.jsx(R,{title:l.toolbarH3,children:r.jsx(y,{onClick:()=>{if(n==="visual"){C("formatBlock","h3");return}B("### ")},icon:r.jsx(Fe,{})})}),r.jsx(R,{title:l.toolbarQuote,children:r.jsx(y,{onClick:()=>{if(n==="visual"){C("formatBlock","blockquote");return}B("> ")},icon:r.jsx(cr,{})})}),r.jsx(R,{title:l.toolbarList,children:r.jsx(y,{onClick:()=>{if(n==="visual"){C("insertUnorderedList");return}B("- ")},icon:r.jsx(Dr,{})})}),r.jsx(R,{title:l.toolbarOrdered,children:r.jsx(y,{onClick:()=>{if(n==="visual"){C("insertOrderedList");return}B("",!0)},icon:r.jsx(Ir,{})})}),r.jsx(R,{title:l.toolbarChecklist,children:r.jsx(y,{onClick:()=>{if(n==="visual"){me();return}B("- [ ] ")},icon:r.jsx(pr,{})})}),r.jsx(R,{title:l.toolbarCode,children:r.jsx(y,{onClick:()=>{if(n==="visual"){Ae();return}j("`","`","code")},icon:r.jsx(yr,{})})}),r.jsx(R,{title:l.toolbarCodeBlock,children:r.jsx(y,{onClick:()=>{if(n==="visual"){Se();return}M()},icon:r.jsx(vr,{})})}),r.jsx(R,{title:l.toolbarLink,children:r.jsx(y,{onClick:()=>{if(n==="visual"){we();return}j("[","](url)","text")},icon:r.jsx(Tr,{})})}),r.jsx(R,{title:l.toolbarImage,children:r.jsx(y,{onClick:()=>{if(d){d();return}if(n==="visual"){$e();return}j("![",`](${We})`,"image")},icon:r.jsx(Ar,{})})})]}),c==="edit"&&Oe(),c==="preview"&&Ce(),c==="split"&&r.jsxs(de,{gutter:[16,16],children:[r.jsx(z,{xs:24,md:12,children:Oe()}),r.jsx(z,{xs:24,md:12,children:Ce()})]})]})}),en="operit_submission_local_assets",he="images",tn=1,rn="operit-local://",it=/^[a-z0-9][a-z0-9_-]{7,63}$/i,ct=()=>new Promise((t,e)=>{const s=indexedDB.open(en,tn);s.onupgradeneeded=()=>{const n=s.result;n.objectStoreNames.contains(he)||n.createObjectStore(he,{keyPath:"id"})},s.onsuccess=()=>t(s.result),s.onerror=()=>e(s.error||new Error("open_indexeddb_failed"))}),nn=(t,e="image")=>{const s=String(t).trim().replace(/[\\/]/g,"_").replace(/\s+/g,"-").replace(/[^a-zA-Z0-9._-]/g,"-").replace(/-+/g,"-").replace(/^[-_.]+|[-_.]+$/g,"");return s?s.slice(0,100):e},sn=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?`img_${crypto.randomUUID().replace(/-/g,"")}`:`img_${Date.now().toString(36)}_${Math.random().toString(36).slice(2,12)}`,an=(t,e)=>new Promise((s,n)=>{const a=t.transaction(he,"readonly").objectStore(he);e(a,s,n)}),Tt=(t,e)=>new Promise((s,n)=>{const c=t.transaction(he,"readwrite"),a=c.objectStore(he);e(a,s,n),c.onerror=()=>n(c.error||new Error("indexeddb_write_failed"))}),on=async t=>{const s={id:sn(),name:nn(t.name||"image"),type:t.type||"application/octet-stream",size:t.size,created_at:new Date().toISOString(),blob:t},n=await ct();return await Tt(n,(c,a,l)=>{const d=c.put(s);d.onsuccess=()=>a(),d.onerror=()=>l(d.error||new Error("save_local_image_failed"))}),s},wt=async t=>{if(!it.test(t))return null;const e=await ct();return an(e,(s,n,c)=>{const a=s.get(t);a.onsuccess=()=>{const l=a.result;if(!l?.id||!(l.blob instanceof Blob)){n(null);return}n(l)},a.onerror=()=>c(a.error||new Error("read_local_image_failed"))})},cn=async t=>{if(!it.test(t))return;const e=await ct();await Tt(e,(s,n,c)=>{const a=s.delete(t);a.onsuccess=()=>n(),a.onerror=()=>c(a.error||new Error("delete_local_image_failed"))})},$t=t=>{const e=String(t||""),s=/operit-local:\/\/([a-z0-9][a-z0-9_-]{7,63})/gi,n=new Set;let c=s.exec(e);for(;c;){const a=(c[1]||"").trim();it.test(a)&&n.add(a),c=s.exec(e)}return Array.from(n)},ln=t=>`${rn}${t}`,{Content:dn}=Wt,{Title:_e,Paragraph:St,Text:x}=kt,un=(t,e)=>{for(const s of t.split(`
`)){const n=s.trim().match(/^#\s+(.+)$/);if(n)return n[1].trim()}return e},hn=t=>t.endsWith("/")?t:`${t}/`,Ie=t=>new Date(t).toLocaleString(),mn=async t=>{const e=await t.arrayBuffer(),s=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(s)).map(n=>n.toString(16).padStart(2,"0")).join("")},kn=({language:t})=>{const e=Ut[t].submission,s=qt(),n=Ft(),a=o.useMemo(()=>new URLSearchParams(s.search),[s.search]).get("path")||"",l=localStorage.getItem("operit_submission_admin_api_base")||"https://api.aaswordsman.org",d=o.useMemo(()=>a?`operit_submission_draft:${a}`:"",[a]),w=o.useRef(null),[G,te]=o.useState(!1),[H,K]=o.useState(null),[$,L]=o.useState(""),[m,Q]=o.useState(""),[V,U]=o.useState(""),[C,J]=o.useState(""),[j,B]=o.useState(""),[M,re]=o.useState(""),[oe,me]=o.useState(""),[we,$e]=o.useState(""),[Ae,Se]=o.useState(!1),[ke,q]=o.useState(null),[Oe,Ce]=o.useState(0),[u,g]=o.useState(null),[f,S]=o.useState(null),[p,b]=o.useState(null),[T,_]=o.useState(!1),[ne,F]=o.useState(null),[Y,se]=o.useState([]),[ie,fe]=o.useState("visual"),[ce,Ee]=o.useState("split"),[ze,Lt]=o.useState(14),[He,_t]=o.useState([]),[lt,dt]=o.useState(!1),[Te,Be]=o.useState({}),Ne=o.useRef({}),It=o.useCallback(i=>{me(i)},[]),Rt=o.useCallback(()=>{me("")},[]),Pe=o.useMemo(()=>a.includes("/en/")?"en":a.includes("/zh/")?"zh":t,[a,t]),De=o.useMemo(()=>!!($.trim()||m.trim()||j.trim()||M.trim()),[$,m,j,M]),Le=o.useMemo(()=>{const i=$.trim()&&$.trim()!==V.trim(),h=m.trim()&&m.trim()!==C.trim(),k=!!(j.trim()||M.trim());return!!(i||h||k)},[$,m,j,M,V,C]),Ve=o.useCallback(i=>{if(!d||!a||!De||!i&&!Le)return;const h={target_path:a,title:$,content:m,author_name:j,author_email:M,updated_at:new Date().toISOString()};try{Kt(h),F(h.updated_at),b(h)}catch{}},[d,a,De,Le,$,m,j,M]),ut=o.useCallback(async()=>{if(!a){K(e.errorMissingPath);return}if(!a.startsWith("content/")){K(e.errorInvalidPath);return}te(!0),K(null);try{const i=hn("./"),h=await fetch(`${i}${a}`);if(!h.ok)throw new Error(e.errorLoadFailed);const k=await h.text();Q(k);const I=un(k,a.split("/").pop()||e.defaultTitle);L(v=>v||I),U(I),J(k)}catch(i){K(i.message||e.errorLoadFailed)}finally{te(!1)}},[a,e]),ht=o.useCallback(async()=>{try{const i=await fetch(`${l.replace(/\/+$/,"")}/api/config`);if(!i.ok)return;const h=await i.json();h?.turnstile_site_key&&$e(h.turnstile_site_key)}catch{$e("")}},[l]);o.useEffect(()=>{ut(),ht()},[ut,ht]),o.useEffect(()=>{if(d)try{const i=Qt(a);if(i?.target_path===a){b(i),_(!0),F(i.updated_at||null);return}b(null),_(!1),F(null)}catch{b(null),_(!1),F(null)}},[d,a]),o.useEffect(()=>{se(Xt().slice(0,50))},[]),o.useEffect(()=>{_t(Jt())},[]),o.useEffect(()=>{const i=Yt();fe(i.editorMode),Ee(i.viewMode),Lt(i.fontSize||14),B(h=>h||i.authorName),re(h=>h||i.authorEmail)},[]),o.useEffect(()=>{Zt({authorName:j,authorEmail:M,editorMode:ie,viewMode:ce,fontSize:ze})},[j,M,ie,ce,ze]),o.useEffect(()=>{if(!d||T||!Le)return;const i=window.setTimeout(()=>{Ve(),ft(a,{status:"edited",updated_at:new Date().toISOString(),title:$.trim()||a})},700);return()=>window.clearTimeout(i)},[d,T,Le,Ve,a,$]),o.useEffect(()=>{Ne.current=Te},[Te]),o.useEffect(()=>{const i=$t(m);if(!i.length){Be(v=>(Object.values(v).forEach(O=>URL.revokeObjectURL(O)),Object.keys(v).length?{}:v));return}const h=new Set(i);Be(v=>{const A={};Object.entries(v).forEach(([Z,ge])=>{h.has(Z)?A[Z]=ge:URL.revokeObjectURL(ge)});const O=Object.keys(v),X=Object.keys(A);return O.length===X.length&&O.every(Z=>A[Z]===v[Z])?v:A});let k=!1;return(async()=>{for(const v of i){if(k)return;if(!Ne.current[v])try{const A=await wt(v);if(!A?.blob||k)continue;const O=URL.createObjectURL(A.blob);Be(X=>!h.has(v)||X[v]?(URL.revokeObjectURL(O),X):{...X,[v]:O})}catch{}}})(),()=>{k=!0}},[m]),o.useEffect(()=>()=>{Object.values(Ne.current).forEach(i=>URL.revokeObjectURL(i))},[]);const Mt=()=>{p&&(L(p.title||""),Q(p.content||""),B(p.author_name||""),re(p.author_email||""),_(!1),F(p.updated_at||null))},mt=()=>{if(d)try{tr(a)}catch{}b(null),_(!1),F(null)},At=()=>{se([]);try{gt([])}catch{}},zt=i=>{const h=He.find(I=>I.id===i);if(!h)return;const k=m.trim()?`

${h.content}
`:`${h.content}
`;w.current?.insertText(k),P.success(e.templateInserted)},Ht=o.useCallback(i=>{const h=i.match(/^operit-local:\/\/([a-z0-9][a-z0-9_-]{7,63})$/i);return h?Te[h[1]]||"":i},[Te]),Bt=o.useCallback(async()=>{if(lt)return;const i=document.createElement("input");i.type="file",i.accept="image/*",i.multiple=!0;const h=await new Promise(k=>{i.onchange=()=>{const I=i.files?Array.from(i.files):[];k(I)},i.click()});if(h.length){dt(!0);try{let k=0;for(const I of h){if(!I.type.startsWith("image/")){P.warning(`${I.name}: unsupported image type`);continue}const v=await on(I),A=(v.name||"image").replace(/\.[^.]+$/,"");w.current?.insertText(`![${A}](${ln(v.id)})`),k+=1}k>0&&P.success(`Inserted ${k} image${k>1?"s":""}`)}catch{P.error("Image insert failed")}finally{dt(!1)}}},[lt]),Nt=async()=>{if(q(null),!$.trim()){const i=e.errorTitleRequired;q(i),P.error(i);return}if(!m.trim()||m.trim().length<20){const i=e.errorContentTooShort;q(i),P.error(i);return}if(!j.trim()){const i=e.errorAuthorRequired;q(i),P.error(i);return}if(!oe){const i=e.errorTurnstileRequired;q(i),P.error(i);return}Se(!0),S(null);try{const i=$t(m),h=new FormData,k={type:"edit",language:Pe,target_path:a,title:$.trim(),content:m.trim(),author_name:j.trim(),author_email:M.trim()||void 0,turnstile_token:oe};if(h.set("payload",JSON.stringify(k)),i.length){const N=[];for(const ee of i){const pe=await wt(ee);if(!pe?.blob)throw new Error(`local_image_missing:${ee}`);const be=new File([pe.blob],pe.name||`${ee}.bin`,{type:pe.type||"application/octet-stream"}),Pt=await mn(pe.blob);N.push({id:ee,name:be.name,type:be.type,size:be.size,sha256:Pt}),h.append(`asset_${ee}`,be,be.name)}h.set("assets_manifest",JSON.stringify(N))}const I=new AbortController,v=window.setTimeout(()=>I.abort(),45e3),A=await fetch(`${l.replace(/\/+$/,"")}/api/submissions`,{method:"POST",body:h,signal:I.signal});window.clearTimeout(v);const O=await A.json().catch(()=>({}));if(!A.ok){if(O?.error==="ip_banned"){S({reason:O?.reason||null,expires_at:O?.expires_at||null,created_at:O?.created_at||null,banned_by:O?.banned_by||null}),q(e.ipBanTitle),P.error(e.ipBanTitle);return}const N=O?.error?`${e.errorSubmitFailed}: ${O.error}`:e.errorSubmitFailed;throw q(N),new Error(N)}const X=O?.created_at||new Date().toISOString(),Z=O?.status||"pending",ge=O?.id||"-";g({id:ge,status:Z,created_at:X});for(const N of i)try{await cn(N)}catch{}se(N=>{const ee=[{id:ge,status:Z,created_at:X,title:$.trim(),target_path:a,language:Pe,author_name:j.trim(),author_email:M.trim()||void 0},...N].slice(0,50);try{gt(ee)}catch{}return ee}),ft(a,{status:"submitted",updated_at:new Date().toISOString(),title:$.trim()||a}),P.success(e.submitSuccess),S(null),me(""),Ce(N=>N+1)}catch(i){const h=i.name==="AbortError"?e.errorSubmitTimeout:i.message||e.errorSubmitFailed;q(h),P.error(h)}finally{Se(!1)}};return r.jsx("main",{style:{paddingTop:88,paddingBottom:48},children:r.jsxs(dn,{style:{maxWidth:1100,margin:"0 auto",padding:"0 24px"},children:[r.jsx(le,{children:r.jsxs(E,{direction:"vertical",size:"middle",style:{width:"100%"},children:[r.jsxs("div",{children:[r.jsx(_e,{level:2,style:{marginBottom:8},children:e.title}),r.jsx(St,{type:"secondary",style:{marginBottom:0},children:e.subtitle})]}),r.jsx(ae,{type:"info",showIcon:!0,message:e.ipNotice}),r.jsx(E,{children:r.jsx(y,{onClick:()=>n("/operit-submission-center"),children:e.openCenter})})]})}),r.jsx(le,{style:{marginTop:16},children:r.jsxs(de,{gutter:[16,16],children:[r.jsxs(z,{xs:24,md:16,children:[r.jsx(x,{type:"secondary",children:e.pathLabel}),r.jsx("div",{children:r.jsx(x,{code:!0,children:a||"-"})})]}),r.jsxs(z,{xs:24,md:8,children:[r.jsx(x,{type:"secondary",children:e.languageLabel}),r.jsx("div",{children:r.jsx(qe,{children:Pe})})]})]})}),H&&r.jsx(ae,{type:"error",showIcon:!0,style:{marginTop:16},message:e.errorTitle,description:H}),f&&r.jsx(ae,{type:"error",showIcon:!0,style:{marginTop:16},message:e.ipBanTitle,description:r.jsxs(E,{direction:"vertical",size:0,children:[r.jsx(x,{children:e.ipBanSubtitle}),r.jsxs(x,{type:"secondary",children:[e.ipBanReasonLabel,": ",f.reason||"-"]}),r.jsxs(x,{type:"secondary",children:[e.ipBanExpiresLabel,":"," ",f.expires_at?Ie(f.expires_at):e.ipBanPermanent]}),r.jsxs(x,{type:"secondary",children:[e.ipBanByLabel,": ",f.banned_by||"-"]})]})}),u?r.jsx(le,{style:{marginTop:16},children:r.jsxs(E,{direction:"vertical",size:"middle",style:{width:"100%"},children:[r.jsxs(E,{align:"center",children:[r.jsx(lr,{style:{color:"#52c41a",fontSize:20}}),r.jsx(_e,{level:4,style:{margin:0},children:e.successTitle})]}),r.jsx(St,{type:"secondary",style:{marginBottom:0},children:e.successSubtitle}),r.jsxs(de,{gutter:[16,16],children:[r.jsxs(z,{xs:24,md:8,children:[r.jsx(x,{type:"secondary",children:e.successIdLabel}),r.jsx("div",{children:r.jsx(x,{code:!0,children:u.id})})]}),r.jsxs(z,{xs:24,md:8,children:[r.jsx(x,{type:"secondary",children:e.successStatusLabel}),r.jsx("div",{children:r.jsx(qe,{color:"gold",children:u.status})})]}),r.jsxs(z,{xs:24,md:8,children:[r.jsx(x,{type:"secondary",children:e.successTimeLabel}),r.jsx("div",{children:new Date(u.created_at).toLocaleString()})]})]}),r.jsx(ae,{type:"info",showIcon:!0,message:e.successTip}),r.jsxs(E,{children:[r.jsx(y,{onClick:()=>n(-1),children:e.backToDoc}),r.jsx(y,{onClick:()=>g(null),children:e.submitAnother})]})]})}):r.jsxs(r.Fragment,{children:[T&&p&&!G&&r.jsx(ae,{type:"warning",showIcon:!0,style:{marginTop:16},message:e.draftFound,description:e.draftFoundDesc.replace("{time}",Ie(p.updated_at)),action:r.jsxs(E,{direction:"vertical",children:[r.jsx(y,{size:"small",type:"primary",onClick:Mt,children:e.draftUse}),r.jsx(y,{size:"small",onClick:mt,children:e.draftDiscard})]})}),r.jsx(le,{style:{marginTop:16},children:G?r.jsx("div",{style:{textAlign:"center",padding:32},children:r.jsx(Gt,{})}):r.jsxs(E,{direction:"vertical",size:"middle",style:{width:"100%"},children:[r.jsxs("div",{children:[r.jsx(x,{type:"secondary",children:e.titleLabel}),r.jsx(Re,{value:$,onChange:i=>L(i.target.value)})]}),r.jsx("div",{children:r.jsxs(E,{direction:"vertical",size:"small",style:{width:"100%"},children:[r.jsxs(de,{gutter:[12,12],align:"middle",children:[r.jsxs(z,{xs:24,md:16,children:[r.jsx(x,{type:"secondary",children:e.templateInsertLabel}),r.jsx(dr,{style:{width:"100%"},placeholder:e.templateSelectPlaceholder,options:He.map(i=>({value:i.id,label:i.title})),onSelect:i=>zt(i),disabled:!He.length})]}),r.jsxs(z,{xs:24,md:8,children:[r.jsx(x,{type:"secondary",style:{display:"block"},children:e.templateManageLabel}),r.jsx(y,{onClick:()=>n("/operit-submission-center"),children:e.templateManageButton})]})]}),r.jsxs(de,{gutter:[12,12],align:"middle",children:[r.jsxs(z,{xs:24,md:12,children:[r.jsx(x,{type:"secondary",children:e.editorModeLabel}),r.jsx("div",{children:r.jsx(bt,{value:ie,options:[{label:e.editorModeVisual,value:"visual"},{label:e.editorModeMarkdown,value:"markdown"}],onChange:i=>fe(i)})})]}),r.jsxs(z,{xs:24,md:12,children:[r.jsx(x,{type:"secondary",children:e.viewModeLabel}),r.jsx("div",{children:r.jsx(bt,{value:ce,options:[{label:e.viewModeEdit,value:"edit"},{label:e.viewModeSplit,value:"split"},{label:e.viewModePreview,value:"preview"}],onChange:i=>Ee(i)})})]})]}),r.jsx(x,{type:"secondary",children:e.contentLabel}),r.jsx(Zr,{ref:w,value:m,onChange:Q,placeholder:e.contentPlaceholder,mode:ie,view:ce,fontSize:ze,onInsertImage:Bt,resolveImageUrl:Ht,labels:{toolbarBold:e.toolbarBold,toolbarItalic:e.toolbarItalic,toolbarStrike:e.toolbarStrike,toolbarH1:e.toolbarH1,toolbarH2:e.toolbarH2,toolbarH3:e.toolbarH3,toolbarQuote:e.toolbarQuote,toolbarCode:e.toolbarCode,toolbarCodeBlock:e.toolbarCodeBlock,toolbarList:e.toolbarList,toolbarOrdered:e.toolbarOrdered,toolbarChecklist:e.toolbarChecklist,toolbarLink:e.toolbarLink,toolbarImage:e.toolbarImage,previewEmpty:e.previewEmpty}})]})}),r.jsxs(de,{gutter:[16,16],children:[r.jsxs(z,{xs:24,md:12,children:[r.jsx(x,{type:"secondary",children:e.authorLabel}),r.jsx(Re,{value:j,onChange:i=>B(i.target.value),placeholder:e.authorPlaceholder})]}),r.jsxs(z,{xs:24,md:12,children:[r.jsx(x,{type:"secondary",children:e.emailLabel}),r.jsx(Re,{value:M,onChange:i=>re(i.target.value),placeholder:e.emailPlaceholder})]})]}),r.jsxs("div",{children:[r.jsx(x,{type:"secondary",children:e.turnstileLabel}),r.jsx("div",{style:{marginTop:8},children:we?r.jsx(er,{siteKey:we,onVerify:It,onExpire:Rt},Oe):r.jsx(ae,{type:"warning",message:e.turnstileMissing,showIcon:!0})})]}),ke&&r.jsx(ae,{type:"error",showIcon:!0,message:e.errorTitle,description:ke}),r.jsxs(E,{children:[r.jsx(y,{onClick:()=>n(-1),children:e.back}),r.jsx(y,{type:"primary",loading:Ae,onClick:Nt,children:e.submitButton})]})]})}),r.jsx(le,{style:{marginTop:16},children:r.jsxs(E,{direction:"vertical",size:"small",style:{width:"100%"},children:[r.jsx(_e,{level:4,style:{margin:0},children:e.draftTitle}),ne?r.jsx(x,{type:"secondary",children:e.draftSavedAt.replace("{time}",Ie(ne))}):r.jsx(x,{type:"secondary",children:e.draftEmpty}),r.jsxs(E,{children:[r.jsx(y,{onClick:()=>Ve(!0),disabled:!De,children:e.draftSave}),r.jsx(y,{onClick:mt,disabled:!ne&&!p,children:e.draftClear})]})]})})]}),r.jsx(le,{style:{marginTop:16},children:r.jsxs(E,{direction:"vertical",size:"middle",style:{width:"100%"},children:[r.jsx(_e,{level:4,style:{margin:0},children:e.historyTitle}),Y.length?r.jsx(Ue,{size:"small",dataSource:Y,renderItem:i=>r.jsx(Ue.Item,{actions:[r.jsx(qe,{children:i.language},`${i.id}-lang`),r.jsx(x,{code:!0,children:i.id},`${i.id}-id`)],children:r.jsx(Ue.Item.Meta,{title:i.title||e.historyUntitled,description:r.jsxs(E,{direction:"vertical",size:0,children:[r.jsx(x,{type:"secondary",children:i.target_path}),r.jsxs(x,{type:"secondary",children:[i.status," | ",Ie(i.created_at)]})]})})})}):r.jsx(x,{type:"secondary",children:e.historyEmpty}),r.jsx(E,{children:r.jsx(y,{onClick:At,disabled:!Y.length,children:e.historyClear})})]})})]})})};export{kn as default};
