import{r as s,j as c}from"./index-BTVr4yQo.js";const d="https://challenges.cloudflare.com/turnstile/v0/api.js?render=explicit",a=()=>window.turnstile?Promise.resolve():(window.__operitTurnstilePromise||(window.__operitTurnstilePromise=new Promise((r,t)=>{const e=document.createElement("script");e.src=d,e.async=!0,e.defer=!0,e.onload=()=>r(),e.onerror=()=>t(new Error("turnstile_load_failed")),document.head.appendChild(e)})),window.__operitTurnstilePromise),p=({siteKey:r,onVerify:t,onExpire:e,theme:o})=>{const n=s.useRef(null),i=s.useRef(null);return s.useEffect(()=>{let u=!1;return(async()=>{if(!(!r||!n.current)){try{await a()}catch{return}u||!n.current||!window.turnstile||(i.current=window.turnstile.render(n.current,{sitekey:r,theme:o,callback:l=>t(l),"expired-callback":()=>e?.()}))}})(),()=>{u=!0,i.current&&window.turnstile&&window.turnstile.remove(i.current),i.current=null}},[r,t,e,o]),c.jsx("div",{ref:n})};export{p as T};
